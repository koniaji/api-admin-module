<?php
/**
 * Created by PhpStorm.
 * User: zvinger
 * Date: 19.04.18
 * Time: 13:27
 */

namespace Obvu\Modules\Api\Admin\AdminSubmodules\Content;


use app\components\database\repository\post\PostRepository;
use Obvu\Modules\Api\Admin\AdminSubmodules\Content\components\textBlock\AdminTextBlockRepository;
use Obvu\Modules\Api\Admin\AdminSubmodules\Content\interfaces\blog\post\PostAdminRepositoryInterface;
use Obvu\Modules\Api\Admin\ApiAdminDwyModule;
use yii\base\BootstrapInterface;
use yii\base\Module;

/**
 * Class ApiAdminDwyContentModule
 * @package Obvu\Modules\Api\Admin\AdminSubmodules\Content
 *
 * @property AdminTextBlockRepository textBlock
 */
class ApiAdminDwyContentModule extends Module implements BootstrapInterface
{
    public function bootstrap($app)
    {
        $app->urlManager->addRules([
            ['class' => 'yii\rest\UrlRule', 'controller' => $this->uniqueId . '/content/text-block'],
            ['class' => 'yii\rest\UrlRule', 'controller' => $this->uniqueId . '/content/blog/post'],
            ['class' => 'yii\rest\UrlRule', 'controller' => $this->uniqueId . '/content/blog/post-category'],
            ['class' => 'yii\rest\UrlRule', 'controller' => $this->uniqueId . '/content/page'],
            ['class' => 'yii\rest\UrlRule', 'controller' => $this->uniqueId . '/content/widget'],
        ]);
    }

    public function init()
    {
        $this->components = [
            'textBlock' => AdminTextBlockRepository::class,
        ];
        \Yii::$container->setSingletons([
            PostAdminRepositoryInterface::class => PostRepository::class,
        ]);

        parent::init(); // TODO: Change the autogenerated stub
    }

}